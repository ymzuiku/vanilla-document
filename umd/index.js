!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).vanilly={})}(this,function(e){"use strict";var n;[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var n=this,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.forEach(function(e){n.appendChild(e)})}})}),n=["pushState","replaceState","back","forward","go","scrollRestoration"],void 0===window.history?(window.history={length:0,state:{}},n.forEach(function(e){void 0===window.history[e]&&(window.history[e]=function(){})})):n.forEach(function(e){void 0===window.history[e]&&(window.history[e]=function(){})});var t=navigator.userAgent,r=window.devicePixelRatio||1,i=window.innerWidth,o=/(?:Android)/.test(t),a=/(?:Firefox)/.test(t),l=/(?:Chrome|CriOS)/.test(t),d=/(?:iPad|PlayBook)/.test(t)||o&&!/(?:Mobile)/.test(t)||a&&/(?:Tablet)/.test(t),u=/(?:iPhone)/.test(t)&&!d,s=/MicroMessenger/.test(t),c=!u&&!o,f=1<r?i<=320:i<=640,p=1<r?i<=375:i<=750,h=1<r?i<=512:i<=1024,v=1<r?i<=640:i<=1280,m=Object.freeze({__proto__:null,isAndroid:o,isFireFox:a,isChrome:l,isPad:d,isIos:u,isWechat:s,isPc:c,isSmall:f,isMiddle:p,isLarge:h,isExtraLarge:v}),y=1e4,w=16/y,_=[0,0];function C(e,n){var t;void 0===e&&(e=.5),void 0===n&&(n=.5);for(var r,i,o,a,l,d=Math.min(Math.max(350*e,20),350),u=Math.min(Math.max(40-40*n,1),40),s=[],c=0,f=0;c!==y||0!==f;)void 0,l=(r=c)+(a=(o=f)+(-d*(r-(i=y))+-u*o)*w)*w,Math.abs(a)<1&&Math.abs(l-i)<1?(_[0]=i,_[1]=0):(_[0]=l,_[1]=a),c=(t=_)[0],f=t[1],s.push(c/y);return function(e){return s[Math.ceil(e*(s.length-1))]}}var g=new Set;document.createElement("input");function x(e,n){if("string"!=typeof e)return E(e||document.createElement("div"));var t=document.createElement(e,n);return E(t)}var b={"@media-sm":"@media (min-width: 640px)","@media-md":"@media (min-width: 768px)","@media-lg":"@media (min-width: 1024px)","@media-xl":"@media (min-width: 1280px)","@media-ios":"@media (min-width: "+(u?"0px":"9999px")+")","@media-android":"@media (min-width: "+(o?"0px":"9999px")+")","@media-pc":"@media (min-width: "+(c?"0px":"9999px")+")","@media-phone":"@media (min-width: "+(c?"9999px":"0px")+")","@media-wechat":"@media (min-width: "+(s?"9999px":"0px")+")","@media-pad":"@media (min-width: "+(d?"9999px":"0px")+")"},E=function(i){if(i._DOM)return i._DOM;var a={__isChain:!0,element:i,getElement:function(e){return e(i),a},ref:function(e){return e(a),a},addEvent:function(e,n,t){return i.__events||(i.__events=new Set),i.__events.add([e,n,t]),i.addEventListener(e,n,t),a},addEventListener:function(e,n,t){return i.addEventListener(e,n,t),a},removeEventListener:function(e,n,t){return i.removeEventListener(e,n,t),a},innerText:function(e){return i.innerText=e,a},innerHTML:function(e){return i.innerHTML=e,a},textContent:function(e){return i.textContent=e,a},querySelector:function(e,n,t){var r=i.querySelector(e);return r?n(r):t&&t(),a},querySelectorAll:function(e,n){return n(i.querySelectorAll(e)),a},insertBefore:function(e,n,t){var r=i.querySelector(e);return r?i.insertBefore(n,r):t&&t(),a},insertAdjacentElement:function(e,n){return i.insertAdjacentElement(e,n),a},removeAllChildren:function(){if(i)for(var e=0;e<i.children.length;e++){var n=i.children.item(e);E(n).remove()}return a},removeChild:function(e){for(var n=0;n<i.children.length;n++){var t=i.children.item(n);e(t,n)&&E(t).remove()}return a},remove:function(){return a.removeAllChildren(),i.__onRemove&&i.__onRemove(i.__lastMemo,a),i.__events&&(i.__events.forEach(function(e){i.removeEventListener.apply(i,e)}),i.__events.clear(),i.__events=null),i._DOM=null,i._state=null,i.remove(),a.element=null,a=null},append:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){if(e){var n=e.__isChain?e.element:e;if(i.appendChild(n),n.__onAppend&&n.__onAppend(n.__lastMemo,n._DOM),n.__onRendered){n.id||(n.id=Math.random().toString(16).slice(2));var t=0,r=function(){t++,document.getElementById(n.id)?n.__onRendered(n.__lastMemo,n._DOM):t<100&&setTimeout(r,40)};setTimeout(r,40)}}}),a},props:function(n){return Object.keys(n).forEach(function(e){i[e]=n[e]}),a},getProp:function(e,n){return n(i[e]),a},setAttribute:function(e,n){return i.setAttribute(e,n),a},removeAttribute:function(e){return i.removeAttribute(e),a},cssText:function(e){return i.style.cssText=e,a},appendCss:function(n,e){var t=""+n+e;if(!g.has(t)){var r=document.createElement("style");-1<n.indexOf("@media-")&&Object.keys(b).forEach(function(e){n=n.replace(e,b[e])}),e&&(n=n.replace(/\.\^/g,"."+e+"-")),r.textContent=n,document.head.appendChild(r),g.add(t)}return a},css:function(e,n){return n&&(e=e.replace(/\^/g,n+"-")),i.setAttribute("class",e),a},style:function(n){return Object.keys(n).forEach(function(e){i.style[e]=n[e]}),a},keyframesSpring:function(e,n,t,r){if(!g.has(e)){var i=document.createElement("style"),o=function(e,n,t,r){void 0===n&&(n=.5),void 0===t&&(t=.5);var i="";i+="0%{"+r(0)+"} ";for(var o=C(n,t),a=2;a<100;a+=1){i+=a+"%{"+r(o(a/100))+"} "}i+="100%{"+r(1)+"} ";var l="";l+="0%{"+r(1)+"} ";var d=C(n,t);for(a=2;a<100;a+=2){l+=a+"%{"+r(1-d(a/100))+"} "}return"@keyframes "+e+" {"+i+"} @keyframes "+e+"-reverse {"+(l+="100%{"+r(0)+"} ")+"}"}(e,n,t,r);i.textContent=o,document.head.appendChild(i),g.add(e)}return a},onAppend:function(e){return i.__onAppend=e,i.setAttribute("vanilly-onappend","1"),a},onRendered:function(e){return i.__onRendered=e,i.setAttribute("vanilly-onmount","1"),a},onRemove:function(e){return i.__onRemove=e,i.setAttribute("vanilly-onremove","1"),a}};return i&&(i._DOM=a),a},M=function(){return(M=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function A(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function R(e,n){if(!e)return null;for(var t,r=/([^=?&]+)=?([^&]*)/g,i={};t=r.exec(e);){var o=A(t[1]),a=A(t[2]);null===o||null===a||o in i||(n||(a=isNaN(Number(a))?a:Number(a)),i[o]=a)}return i}function O(e,n){void 0===n&&(n="");var t,r,i=[];for(r in"string"!=typeof n&&(n="?"),e)if(Object.prototype.hasOwnProperty.call(e,r)){if((t=e[r])||null!=t&&!isNaN(t)||(t=""),r=encodeURIComponent(r),t=encodeURIComponent(t),null===r||null===t)continue;i.push(r+"="+t)}return i.length?n+i.join("&"):""}var S="block",k="block",P="absolute",j="auto",L="none";var T,D={routeManage:T=function(){function a(e,n){var t=e+n;if(f.has(t))return f.get(t);var r=e&&e.split("/"),i=n&&n.split("/");if(!i||!r)return f.set(t,!1),!1;var o=!0;return r.forEach(function(e,n){"*"!==e&&e!==i[n]&&(o=!1)}),f.set(t,o),o}function l(){if(0<window.location.hash.length){var e=window.location.hash.split("?"),n=e[0],t=e[1],r=void 0===t?"":t;return[n.replace(h,""),r]}return[window.location.pathname,window.location.search||""]}function d(e,n){for(var t=0,r=o;t<r.length;t++){(0,r[t])(e,n,s)}}function u(e,n,t){if(e!==c[c.length-1]){c.push(e);var r=M({},s[e],n);if(s[e]=r,"undefined"!=typeof window&&!t&&!v){var i=O(r);window.history.pushState(null,""+h+e,""===i?""+h+e:""+h+e+"?"+i)}d(e,n)}}function i(e,n){for(var t="number"==typeof e?e:c.length-1,r=c[t-1],i=s[r],o=0;o<c.length-t;o++)n||window.history.back(),s[r]={},c.pop();d(r,i)}var s={},c=[],f=new Map,p=new Map,h="",v=!1,o=[];if("undefined"!=typeof window){window.addEventListener("popstate",function(){if(l()[0]!==c[c.length-1]){var t=!1;if(c.forEach(function(e,n){e===l()[0]&&(t=!0)}),t)i(void 0,!0);else{var e=l(),n=e[0],r=e[1];u(n,""!==r?R(r):void 0,!0)}}else d(l()[0],void 0)})}return{checkPathMatch:function(e){var n=e+":"+c.join(",");if(p.has(n))return p.get(n);for(var t=!1,r=0,i=0;i<c.length;i++){a(e,c[i])&&(r=i,t=!0)}var o=[a(e,c[c.length-1]),t,r];return p.set(n,o),o},init:function(e,n,t){if(void 0===t&&(t="#"),v=n||!1,h=t,"undefined"!=typeof window){var r=l(),i=r[0],o=R(r[1]);"/"===i||i===e?u(e,o):(u(e),u(i,o))}},listen:function(e){o.push(e)},pop:i,push:u,replace:function(e,n){var t=e||c[c.length-1],r=M({},s[e],n);if(s[e]=r,c[s.paths.length-1]=t,"undefined"!=typeof window){var i=O(r);window.history.replaceState(null,""+h+t,""===i?""+h+t:""+h+t+"?"+i)}d(t,n)},state:s,paths:c}}(),Route:function(e){var a=e.path,l=e.component,d=e.delay,n=e.keep,u=void 0===n||n,s=e.leaveTime,c=x("div");c.setAttribute("route",a),c.style({width:"100%",height:"100%",overflow:"hidden",left:"0px",top:"0px",backgroundColor:"#fff",pointerEvents:L,display:k,position:P,zIndex:1});var f={animeTimer:null,unListen:null,isRenderChild:!1,style:{},realChild:null},p=function(){var e=T.checkPathMatch(a),n=e[0],t=e[1],r=e[2];if(n)f.realChild||(void 0===d?(f.realChild=l(),c.removeAllChildren().append(f.realChild),p()):l().then(function(e){f.realChild=e(),c.removeAllChildren().append(f.realChild),p()})),f.isRenderChild=!0,f.style={pointerEvents:j,display:S,position:"relative",zIndex:3},c.style(f.style);else{var i=u&&t,o=f.isRenderChild;void 0!==f.isRenderChild&&!0!==f.isRenderChild||(0<r&&s&&0<s?(f.style={pointerEvents:j,display:S,position:P,zIndex:S},c.style(f.style),setTimeout(function(){f.isRenderChild=i,f.style={pointerEvents:L,display:k,position:P,zIndex:1},c.style(f.style),o&&!f.isRenderChild?c.removeAllChildren():o||c.removeAllChildren().append(f.realChild)},s)):(f.isRenderChild=i,f.style={pointerEvents:L,display:k,position:P,zIndex:0<r?2:1},c.style(f.style),o&&!f.isRenderChild?c.removeAllChildren():o||c.removeAllChildren().append(f.realChild)))}};return c.onAppend(function(){f.unListen=T.listen(p)}),c.onRemove(function(){f.unListen&&f.unListen(),f.realChild=null,f.animeTimer=null}),c}},I=D.routeManage,N=D.Route;e.DOM=x,e.Route=N,e.Springer=C,e.device=m,e.makeStyle=function(e){return e},e.routeManage=I,e.toDOM=E,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
